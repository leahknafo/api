<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="job-board.css"> -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
</head>

<body>
    <div class="container">
        <form>
            <h2>Job Board</h2>
            <button type="button" id="useridbutton" class="btn btn-primary">Send</button>
            <span><input id="userid" placeholder="User id..."></span>
            <br><br>
                <div id="content" class='content'>
                       
                </div>
        </form>
    </div>
    <script>
         const tableTemplate =` <table class="table table-bordered">
                                <thead>
                                  <tr>
                                    <th>Sunday</th>
                                    <th>Monday</th>
                                    <th>Tuesday</th>
                                    <th>Wednsday</th>
                                    <th>Thursday</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr>
                                   <td><strong>{{first}}</strong><br><img src="{{company_logo}}" style="width:100px; heigth:100px;"><br>{{firstdesc}}</td>
                                    <td><strong>{{second}}</strong><br><img src="{{company_logo}}" style="width:100px; heigth:100px;"><br>{{seconddesc}}</td>
                                    <td><strong>{{third}}</strong><br><img src="{{company_logo}}" style="width:100px; heigth:100px;"><br>{{thirddesc}}</td>
                                    <td><strong>{{forth}}</strong><br><img src="{{company_logo}}" style="width:100px; heigth:100px;"><br>{{forthdesc}}</td>
                                    <td><strong>{{fifth}}</strong><br><img src="{{company_logo}}" style="width:100px; heigth:100px;"><br>{{fifthdesc}}</td>
                                  </tr>
                                </tbody>
                              </table>`
                    
        $("#useridbutton").click(function () {
            $('#content').empty();
            var userId = $("#userid").val();
            $.ajax('https://api.github.com/user/' + userId).done(function (d) {
                console.log(d);
                console.log(d.location);
                var userLocation = d.location;
                const proxyurl = "https://cors-anywhere.herokuapp.com/";
                $.ajax(proxyurl + 'https://jobs.github.com/positions.json?description=python&location=' + userLocation).done(function (f) {
                    console.log(f);
                   
                    let t = tableTemplate;
                    if(f[0]!=null){
                    t = t.replace('{{first}}', f[0].company);
                    t = t.replace('{{firstdesc}}', f[0].title);
                    t = t.replace('{{company_logo}}', f[0].company_logo);
                    }
                    else{
                    t = t.replace('{{first}}', 'No job found in this area');
                    t = t.replace('{{firstdesc}}', '');
                    t = t.replace('{{company_logo}}', '');
                    }
                    if(f[1]!=null){
                    t = t.replace('{{second}}', f[1].company);
                    t = t.replace('{{seconddesc}}', f[1].title);
                    t = t.replace('{{company_logo}}', f[1].company_logo);
                    }
                    else{
                    t = t.replace('{{second}}', '');
                    t = t.replace('{{seconddesc}}', '');
                    t = t.replace('{{company_logo}}', '');
                    }
                    if(f[2]!=null){
                    t = t.replace('{{third}}', f[2].company);
                    t = t.replace('{{thirddesc}}', f[2].title);
                    t = t.replace('{{company_logo}}', f[2].company_logo);
                    }
                    else{
                    t = t.replace('{{third}}', '');
                    t = t.replace('{{thirddesc}}', '');
                    t = t.replace('{{company_logo}}', '');
                    }
                    if(f[3]!=null){
                    t = t.replace('{{forth}}', f[3].company);
                    t = t.replace('{{forthdesc}}', f[3].title);
                    t = t.replace('{{company_logo}}', f[3].company_logo);
                    }
                    else{
                    t = t.replace('{{forth}}', '');
                    t = t.replace('{{forthdesc}}', '');
                    t = t.replace('{{company_logo}}', '');
                    }
                    if(f[4]!=null){
                    t = t.replace('{{fifth}}', f[4].company);
                    t = t.replace('{{fifthdesc}}', f[4].title);
                    t = t.replace('{{company_logo}}', f[4].company_logo);
                    }
                    else{
                    t = t.replace('{{fifth}}', '');
                    t = t.replace('{{fifthdesc}}', '');
                    t = t.replace('{{company_logo}}', '');
                    }
                    $('#content').append(t);
                
                });
            });
        });
    </script>
</body>

</html>